import type { Middleware } from "@qfetch/core";

/**
 * Configuration options for the {@link with{{pascalCase middlewareName}} } middleware.
 *
 * [TODO: Add detailed description of what these options control and their purpose.
 * Reference relevant web standards (RFC, MDN, etc.) if applicable.]
 */
export type {{pascalCase middlewareName}}Options = {
	/**
	 * [TODO: Describe this option's purpose and behavior.]
	 *
	 * @default [TODO: default value or undefined]
	 */
	// option?: type;
};

/**
 * Middleware that [TODO: brief description of what this middleware does].
 *
 * [TODO: Add more detailed description explaining the middleware's purpose,
 * when to use it, and how it integrates with the fetch API. Reference relevant
 * web standards (RFC, MDN, etc.) if applicable.]
 *
 * @remarks
 * [TODO: Document key behaviors and edge cases]
 *
 * @param opts - Configuration options. See {@link {{pascalCase middlewareName}}Options} for details.
 *
 * @example
 * ```ts
 * import { with{{pascalCase middlewareName}} } from "@qfetch/middleware-{{kebabCase middlewareName}}";
 *
 * const qfetch = with{{pascalCase middlewareName}}({
 *   // TODO: Add configuration
 * })(fetch);
 *
 * await qfetch("https://example.com");
 * ```
 */
export const with{{pascalCase middlewareName}}: Middleware<[opts: {{pascalCase middlewareName}}Options]> = (
	opts,
) => {
	// TODO: Extract and validate options
	// const {} = opts;

	// TODO: Add any initialization logic, constants, or helper setup here
	// Example: const headerName = "X-Custom-Header";
	// Example: const validStatuses = new Set([200, 201, 204]);

	return (next) => async (input, init) => {
		// TODO: Implement pre-request logic (request transformation, validation, etc.)

		// Execute the next middleware or fetch
		const response = await next(input, init);

		// TODO: Implement post-response logic (response transformation, error handling, etc.)

		return response;
	};
};

// TODO: Add helper functions below if needed
// /**
//  * [Helper function description]
//  *
//  * @param param - [parameter description]
//  * @returns [return value description]
//  */
// const helperFunction = (param: type): returnType => {
//   // implementation
// };

// TODO: Add constants with documentation if needed
// /**
//  * [Constant description and purpose]
//  *
//  * @see [Link to relevant standard or documentation]
//  */
// const CONSTANT_NAME = value;
